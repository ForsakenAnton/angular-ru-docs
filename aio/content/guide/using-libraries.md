{@a using-published-libraries}
# Использование опубликованных библиотек

При создании приложений Angular вы можете воспользоваться сложными сторонними библиотеками, такими как [Angular Material](https://material.angular.io/), а также богатой экосистемой сторонних библиотек.
Смотрите [Angular Resources](https://angular.io/resources)страницу для ссылок на самые популярные из них.

{@a installing-libraries}
## Установка библиотек

Библиотеки публикуются как [пакеты npm](guide/npm-packages), обычно вместе со схемами, которые интегрируют их с Angular CLI.
Чтобы интегрировать повторно используемый библиотечный код в приложение, вам необходимо установить пакет и импортировать предоставленную функциональность там, где вы будете его использовать. Для большинства опубликованных библиотек Angular вы можете использовать Angular CLI  `ng add <lib_name>`  команду.

 `ng add` Команда использует менеджер пакетов npm или [yarn](https://yarnpkg.com/)для установки пакета библиотеки и вызывает схемы, включенные в пакет, для других скаффолдингов в коде проекта, таких как добавление операторов импорта, шрифтов, тем и т. д.

Опубликованная библиотека обычно предоставляет README или другую документацию о том, как добавить эту библиотеку в ваше приложение.
Например, см. [Angular Material](https://material.angular.io/)документы.

{@a library-typings}
### Библиотечный набор

Библиотечные пакеты часто включают в себя  `.d.ts`  файлы ; см примеры в  `node_modules/@angular/material`  . Если в пакет вашей библиотеки не входит набор текста и ваша IDE жалуется, вам может потребоваться установить связанную библиотеку  `@types/<lib_name>`  пакет.

Например, предположим, у вас есть библиотека с именем  `d3`  :

<code-example language="bash">
npm install d3 --save
npm install @types/d3 --save-dev
</code-example>

Типы, определенные в  `@types/`  Пакет для библиотеки, установленной в рабочей области, автоматически добавляется в конфигурацию TypeScript для проекта, который использует эту библиотеку.
TypeScript ищет типы в  `node_modules/@types`  по умолчанию, поэтому вам не нужно добавлять каждый тип пакета отдельно.

Если в библиотеке нет доступных типов на  `@types/`, вы все равно можете использовать его, вручную добавив для него наборы.
Для этого:

1. Создать  `typings.d.ts`  файл в вашем  `src/`  папка . Этот файл автоматически включается как определение глобального типа.

2. Добавьте следующий код в  `src/typings.d.ts`.

```
declare module 'host' {
  export interface Host {
    protocol?: string;
    hostname?: string;
    pathname?: string;
  }
  export function parse(url: string, queryString?: string): Host;
}
```

3. В компонент или файл, который использует библиотеку, добавьте следующий код.

```
import * as host from 'host';
const parsedUrl = host.parse('https://angular.io');
console.log(parsedUrl.hostname);
```

Вы можете определить больше типов по мере необходимости.

{@a updating-libraries}
## Обновление библиотек

Библиотеки могут обновляться их издателями, а также иметь свои собственные зависимости, которые необходимо поддерживать в актуальном состоянии.
Чтобы проверить наличие обновлений в установленных библиотеках, используйте команду [ `ng update` ](cli/update).

использование `ng update <lib_name>` для обновления отдельных версий библиотеки. Angular CLI проверяет последний опубликованный выпуск библиотеки, и, если последняя версия новее установленной версии, загружает ее и обновляет  `package.json`  чтобы соответствовать последней версии.

Когда вы обновляете Angular до новой версии, вам необходимо убедиться, что все используемые вами библиотеки являются актуальными. Если у библиотек есть взаимозависимости, вам, возможно, придется обновить их в определенном порядке.
См. [Angular руководство по обновлению](https://update.angular.io/)для помощи.

{@a adding-a-library-to-the-runtime-global-scope}
## Добавление библиотеки в глобальную область выполнения

Устаревшие библиотеки JavaScript, которые не импортируются в приложение, можно добавить в глобальную область выполнения и загрузить, как если бы они были в теге сценария.
Сконфигурируйте CLI, чтобы сделать это во время сборки, используя опции «scripts» и «styles» цели сборки в[Файл конфигурации CLI](guide/workspace-config),  `angular.json`.

Например, чтобы использовать [4 Bootstrap](https://getbootstrap.com/docs/4.0/getting-started/introduction/)библиотеку, сначала установить библиотеку и его зависимости с помощью менеджера пакетов НПМ:

<code-example language="bash">
npm install jquery --save
npm install popper.js --save
npm install bootstrap --save
</code-example>

в  `angular.json`  конфигурационный файл, добавьте связанные файлы сценариев в массив «сценариев»:

```
"scripts": [
  "node_modules/jquery/dist/jquery.slim.js",
  "node_modules/popper.js/dist/umd/popper.js",
  "node_modules/bootstrap/dist/js/bootstrap.js"
],
```

Добавьте CSS файл Bootstrap в массив «стилей»:

```
"styles": [
  "node_modules/bootstrap/dist/css/bootstrap.css",
  "src/styles.css"
],
```

Запустите или перезапустите `ng serve` чтобы увидеть, как Bootstrap 4 работает в вашем приложении.

{@a using-runtime-global-libraries-inside-your-app}
### Использование глобальных библиотек времени выполнения внутри вашего приложения

После того, как вы импортируете библиотеку с помощью массива «scripts», вы должны **не** импортировать ее, используя инструкцию import в вашем коде TypeScript (например, `import* as $ from 'jquery';`).
Если вы это сделаете, вы получите две разные копии библиотеки: одну импортированную как глобальную библиотеку, а другую как модуль.
Это особенно плохо для библиотек с плагинами, таких как JQuery, потому что у каждой копии будут разные плагины.

Вместо этого загрузите наборы для вашей библиотеки (`npm install @types/jquery`) и следуйте по установке библиотеки. Это дает вам доступ к глобальным переменным, предоставляемым этой библиотекой.

{@a defining-typings-for-runtime-global-libraries}
### Определение типов для глобальных библиотек времени выполнения

Если используемая вами глобальная библиотека не имеет глобальных типизаций, вы можете объявить их вручную как  `any`  в  `src/typings.d.ts`  . Например:

```
declare var libraryName: any;
```

Некоторые сценарии расширяют другие библиотеки; например, с помощью JQuery плагинов:

```
$('.test').myPlugin();
```

В этом случае установленный  `@types/jquery`  не включает  `myPlugin`, поэтому вам нужно добавить интерфейс в  `src/typings.d.ts`  . Например:

```
interface JQuery {
  myPlugin(options?: any): any;
}
```

Если не добавить интерфейса для расширения сценария определенно, ваш IDE показывает ошибку:

```
[TS][Error] Property 'myPlugin' does not exist on type 'JQuery'
```
