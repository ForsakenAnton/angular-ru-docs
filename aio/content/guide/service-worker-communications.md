{@a service-worker-communication}
# Сервисный работник связи

Импорт  `ServiceWorkerModule`  в ваш  `AppModule`  не только регистрирует работника сервиса, но и предоставляет несколько сервисов, которые вы можете использовать для взаимодействия с работником сервиса и управления кэшированием вашего приложения.

{@a prerequisites}
#### Предпосылки

Основное понимание следующего:
* [Начало работы с сервисными работниками](guide/service-worker-getting-started).

<hr />


{@a swupdate-service}
##  `SwUpdate` обслуживание

 `SwUpdate` предоставляет вам доступ к событиям, которые указывают, когда работник службы обнаружил доступное обновление для вашего приложения или когда он активировал такое обновление, то есть теперь он передает контент из этого обновления в ваше приложение.

 `SwUpdate` служба поддерживает четыре отдельных операций:
* Получение уведомлений о*доступных * обновлениях. Это новые версии приложения, которые будут загружаться при обновлении страницы.
* Получение уведомления об обновления*активации *. Это когда сервисный работник начинает обслуживать новую версию приложения немедленно.
* Попросив работника сервиса проверить сервер на наличие новых обновлений.
* Попросить работника сервиса активировать последнюю версию приложения для текущей вкладки.

{@a available-and-activated-updates}
### Доступные и активированные обновления

Два события обновления,  `available`  и  `activated`, являются  `Observable`  свойства  `SwUpdate`  :

<code-example path="service-worker-getting-started/src/app/log-update.service.ts" header="log-update.service.ts" region="sw-update"></code-example>


Вы можете использовать эти события, чтобы уведомить пользователя об ожидающем обновлении или обновить его страницы, когда выполняемый ими код устарел.

{@a checking-for-updates}
### Проверка обновлений

Можно попросить работника сервиса проверить, были ли какие-либо обновления развернуты на сервере. Вы можете сделать это, если у вас часто меняется сайт или вы хотите, чтобы обновления происходили по расписанию.

Сделайте это с  `checkForUpdate()`  Метод:

<code-example path="service-worker-getting-started/src/app/check-for-update.service.ts" header="check-for-update.service.ts"></code-example>


Этот метод возвращает  `Promise`  которое указывает, что проверка обновления успешно завершена, но не указывает, было ли обнаружено обновление в результате проверки. Даже если такой файл найден, работнику службы все равно нужно успешно загрузить измененные файлы, что может привести к сбою. В случае успеха  `available`  событие будет указывать на наличие новой версии приложения.

<div class="alert is-important">

Чтобы избежать негативного влияния на начальный рендеринг,  `ServiceWorkerModule`  будет по умолчанию
дождитесь стабилизации приложения перед регистрацией скрипта ServiceWorker. Постоянно опрашиваю
обновления, например, с  `interval()`, будет препятствовать стабилизации приложения и ServiceWorker
скрипт никогда не будет зарегистрирован в браузере.

Вы можете избежать этого, подождав, пока приложение стабилизируется, прежде чем начинать поиск обновлений
(как показано в примере выше).

Обратите внимание, что это верно для любого вида опроса, выполняемого вашим приложением.
Проверьте {@link ApplicationRef#isStable isStable}документацию для получения дополнительной информации.

</div>

{@a forcing-update-activation}
### Принудительная активация обновления

Если текущая вкладка должна быть обновлена ​​до последней версии приложения, она может попросить сделать это с помощью  `activateUpdate()`  Метод:

<code-example path="service-worker-getting-started/src/app/prompt-update.service.ts" header="prompt-update.service.ts" region="sw-activate"></code-example>

Это может нарушить отложенную загрузку приложений, запущенных в данный момент, особенно если загруженные фрагменты используют имена файлов с хэшами, которые меняют каждую версию.

{@a more-on-angular-service-workers}
## Больше на Angular сервисных рабочих

Вы также можете быть заинтересованы в следующих ситуациях :
* [Сервисный работник на производстве](guide/service-worker-devops).
