{@a complex-animation-sequences}
# Сложные анимационные последовательности

{@a prerequisites}
#### Предпосылки

Базовое понимание следующих понятий:

* [Введение в Angular анимацию](guide/animations)
* [Переход и триггеры](guide/transition-and-triggers)

<hr>

До сих пор мы изучали простые анимации отдельных элементов HTML. Angular также позволяет анимировать скоординированные последовательности, такие как вся сетка или список элементов, когда они входят и покидают страницу. Вы можете запускать несколько анимаций параллельно или последовательно запускать отдельные анимации, одну за другой.

Функции, которые контролируют сложные последовательности анимации следующим образом :

* `query()` находит один или несколько внутренних элементов HTML.
* `stagger()` применяет каскадную задержку к анимации для нескольких элементов.
* [ `group ()` ](api/animations/group)выполняет несколько шагов анимации параллельно.
* `sequence()` запускает шаги анимации один за другим.

{@a complex-sequence}

{@a animate-multiple-elements-using-query-and-stagger-functions}
## Анимируйте несколько элементов, используя функции query () и stagger ()

 `query()` Функция позволяет вам находить внутренние элементы в анимируемом элементе. Эта функция предназначена для определенных элементов HTML в родительском компоненте и применяет анимацию к каждому элементу индивидуально. Angular интеллектуально управляет настройкой, разборкой и очисткой, координируя элементы по всей странице.

 `stagger()` Функция позволяет определить временной интервал между каждым запрашиваемым элементом, который анимируется, и, таким образом, анимирует элементы с задержкой между ними.

Вкладка Filter / Stagger в живом примере показывает список героев с вводной последовательностью. Весь список героев идет каскадно, с небольшой задержкой сверху вниз.

В следующем примере показано, как использовать `query()` и `stagger()` Функция при вводе анимированного элемента.

* использование `query()` для поиска элемента, входящего на страницу, который соответствует определенным критериям.

* Для каждого из этих элементов используйте `style()` чтобы установить тот же начальный стиль для элемента. Сделайте это невидимым и используйте `transform` чтобы переместить его из положения, чтобы он мог скользить на место.

* использование `stagger()` для задержки каждой анимации на 30 миллисекунд.

* Анимируйте каждый элемент на экране в течение 0,5 секунды, используя настраиваемую кривую замедления, одновременно добавляя и отменяя преобразование.

<code-example path="animations/src/app/hero-list-page.component.ts" header="src/app/hero-list-page.component.ts" region="page-animations" language="typescript"></code-example>

{@a parallel-animation-using-group-function}
## Параллельная анимация с использованием функции group ()

Вы видели, как добавить задержку между каждой последовательной анимацией. Но вы также можете настроить анимацию, которая происходит параллельно. Например, вы можете анимировать два свойства CSS одного и того же элемента, но использовать разные `easing` Функция для каждого. Для этого вы можете использовать animation [ `group ()` ](api/animations/group)функцию.

<div class="alert is-helpful">

**Примечание:** [ `группа ()` ](api/animations/group)функция используется для группы анимации*шагов *, а не анимационных элементов.
</div>

В следующем примере использование групп на обоих `:enter` и `:leave` разрешение для двух разных временных настроек. Они применяются к одному и тому же элементу параллельно, но работают независимо.

<code-example path="animations/src/app/hero-list-groups.component.ts" region="animationdef" header="src/app/hero-list-groups.component.ts (excerpt)" language="typescript"></code-example>

{@a sequential-vs.-parallel-animations}
## Последовательная и параллельная анимация

Сложные анимации могут иметь много вещей, происходящих одновременно. Но что, если вы хотите создать анимацию, включающую несколько анимаций, происходящих одна за другой? Ранее мы использовали [ `group ()` ](api/animations/group)для одновременного запуска нескольких анимаций одновременно.

Вторая функция называется `sequence()` позволяет запускать одну и ту же анимацию одну за другой. В `sequence()`, шаги анимации состоят из `style()` или `animate()` вызовы функций.

* использование `style()` для немедленного применения предоставленных данных стиля.
* использование `animate()` для применения данных стиля в течение заданного интервала времени.

{@a filter-animation-example}
## Пример анимации фильтра

Давайте посмотрим на другую анимацию на странице примера. На вкладке Filter / Stagger введите текст в **Search Heroes** текстовое поле, например: `Magnet` или `tornado`.

Фильтр работает в режиме реального времени при вводе. Элементы покидают страницу при вводе каждой новой буквы, и фильтр становится все более строгим. Список героев постепенно возвращается на страницу по мере удаления каждой буквы в окне фильтра.

HTML-шаблон содержит триггер с именем `filterAnimation`.

<code-example path="animations/src/app/hero-list-page.component.html" header="src/app/hero-list-page.component.html" region="filter-animations"></code-example>

Файл компонента содержит три перехода.

<code-example path="animations/src/app/hero-list-page.component.ts" header="src/app/hero-list-page.component.ts" region="filter-animations" language="typescript"></code-example>

Анимация делает следующее:

* Игнорирует любые анимации, которые выполняются, когда пользователь впервые открывает или переходит на эту страницу. Фильтр сужает то, что уже есть, поэтому он предполагает, что любые анимированные HTML-элементы уже существуют в DOM.

* Выполняет фильтр совпадений для совпадений.

Для каждого матча:

* Скрывает элемент, делая его полностью прозрачным и бесконечно узким, устанавливая его непрозрачность и ширину равными 0

* Анимация в элементе более 300 миллисекунд. Во время анимации элемент принимает ширину и непрозрачность по умолчанию.

* Если имеется несколько совпадающих элементов, в каждом элементе начинаются помехи, начиная с верхней части страницы, с задержкой в ​​50 миллисекунд между каждым элементом.

{@a animation-sequence-summary}
## Краткое изложение последовательности анимации

Angular функции для анимации нескольких элементов начинаются с `query()` чтобы найти внутренние элементы, например, собирая все изображения в пределах `<div>` . Остальные функции, `stagger()`, [ `group () ` ](api/animations/group)и ` sequence()`, применяет каскады или позволяет вам контролировать применение нескольких шагов анимации.

{@a more-on-angular-animations}
## Подробнее об Angular анимации

Вы также можете быть заинтересованы в следующих ситуациях :

* [Введение в Angular анимацию](guide/animations)
* [Переход и триггеры](guide/transition-and-triggers)
* [Многоразовые анимации](guide/reusable-animations)
* [Анимация перехода маршрута](guide/route-animations)
