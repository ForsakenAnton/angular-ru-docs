{@a internationalization-i18n}
# Интернационализация (i18n)

Интернационализация приложений - это многогранная область развития, ориентированная на создание
приложения доступны и удобны для мировой аудитории. Эта страница описывает Angular's
инструменты интернационализации (i18n), которые помогут вам сделать ваше приложение доступным на нескольких языках.

См. <live-example downloadOnly name="i18n">Пример i18n </live-example>для простого примера
AOT-скомпилированное приложение, переведенное на французский язык.

{@a angular-i18n}
{@a angular-and-i18n}
## Angular и и18н

*интернационализация* это процесс проектирования и подготовки вашего приложения для использования на разных языках.
*Локализация* - это процесс перевода вашего интернационализированного приложения на конкретные языки для определенных локалей.

Angular упрощает следующие аспекты интернационализации:
* Отображение дат, чисел, процентов и валют в локальном формате.
* Подготовка текста в шаблонах компонентов для перевода.
* Обработка множественных форм слов.
* Обработка альтернативного текста.

Для локализации вы можете использовать [Angular CLI](cli)создать большую часть шаблонов, необходимых для создания файлов для переводчиков, и опубликовать свое приложение на нескольких языках.
После того, как вы создали приложение для использования i18n, то CLI может помочь вам следующие шаги:
* Извлечение локализуемого текста в файл, который вы можете отправить для перевода.
* Создание и обслуживание приложения для заданной локали с использованием переведенного текста.
* Создание многоязычных версий вашего приложения.

{@a setting-up-cli}
{@a setting-up-localization-with-the-angular-cli}
## Настройка локализации с помощью Angular CLI

Первый шаг к настройке локализации при использовании Angular CLI - добавить `@angular/localize` Пакет для проекта. Это установит пакет в вашем проекте, а также
инициализировать проект, чтобы воспользоваться возможностями локализации Angular.

<code-example language="sh" class="code-shell">
  ng add @angular/localize
</code-example>


{@a setting-up-locale}
{@a setting-up-the-locale-of-your-app}
## Настройка языка вашего приложения

Локаль - это идентификатор (id), который относится к набору пользовательских предпочтений, которые обычно используются совместно
в пределах региона мира, такого как страна. Этот документ ссылается на идентификатор локали как
"locale" или "locale id".

Идентификатор локали Unicode состоит из идентификатора языка Unicode и (необязательно)
характер `-` последующим расширением локали. (По историческим причинам характер `_` поддерживается
в качестве альтернативы `-` .) Например, в идентификаторе локали `fr-CA` `fr` относится к французскому
идентификатор языка и `CA` относится к расширению локали Канады.

<div class="alert is-critical">

Angular следует соглашению Unicode LDML, в котором используются стабильные идентификаторы (идентификаторы локали Unicode)
на основании нормы [BCP47](http://www.rfc-editor.org/rfc/bcp/bcp47.txt). Это очень важно
вы придерживаетесь этого соглашения при определении вашей локали, потому что инструменты Angular i18n используют это
идентификатор локали, чтобы найти правильные данные соответствующей локали.

</div>

По умолчанию Angular использует локаль `en-US` - английский, на котором говорят в Соединенных Штатах Америки.

Для получения дополнительной информации об идентификаторах локали Unicode см
[Основные характеристики CLDR](http://cldr.unicode.org/core-spec#Unicode_Language_and_Locale_Identifiers).

Для полного списка языков, поддерживаемых Angular, смотрите
[Angular репозиторий](https://github.com/angular/angular/tree/master/packages/common/locales).

Идентификаторы локали, используемые CLDR и Angular, основаны на [BCP47](http://www.rfc-editor.org/rfc/bcp/bcp47.txt).
Эти спецификации меняются со временем; следующая таблица отображает предыдущие идентификаторы на текущие в
Время написания:

| Название локали | Старый идентификатор локали | Новый идентификатор локали |
|---------------------------------|-------------------|---------------|
| Индонезийский | in | id |
| Иврит | iw | he |
| Румынская Молдова | mo | ro-MD |
| Норвежский букмол | no, no-NO | nb |
| Сербская латынь | sh | sr-Latn |
| Филиппинский | tl | fil |
| Португальский Бразильский | pt-BR | pt |
| Китайский упрощенный | zh-cn, zh-Hans-CN | zh-Hans |
| Китайский традиционный | zh-tw, zh-Hant-TW | zh-Hant |
| Китайский традиционный Гонконг | zh-hk | zh-Hant-HK |



{@a i18n-pipes}
## Пайпы i18n

Angular пайпы могут помочь вам с интернационализацией: `DatePipe`, `CurrencyPipe`, `DecimalPipe` 
и `PercentPipe` использует данные локали для форматирования данных на основе `LOCALE_ID` токен зависимости.

По умолчанию Angular содержит только данные локали для `en-US`.
CLI автоматически включает данные о локали и устанавливает `LOCALE_ID` Значение для вас, когда вы используете
параметр `--i18nLocale` или опция `i18nLocale` с `ng serve ` и ` ng build`.
Однако, если вы вручную установите значение `LOCALE_ID` в другую локаль, вы должны импортировать данные локали для этой новой локали.

Если вы хотите импортировать данные локали для других языков, вы можете сделать это вручную

<code-example path="i18n/doc-files/app.locale_data.ts" region="import-locale" header="src/app/app.module.ts"></code-example>

Первый параметр - это объект, содержащий данные локали, импортированные из `@angular/common/locales`.
По умолчанию импортированные данные локали регистрируются с идентификатором локали, определенным в Angular
сами данные локали.
Если вы хотите зарегистрировать импортированные данные локали с другим идентификатором локали, используйте второй параметр для
укажите собственный идентификатор локали. Например, данные локали Angular определяют идентификатор локали для французского языка как
«фр». Вы можете использовать второй параметр, чтобы связать импортированные данные французской локали с пользовательскими
идентификатор локали "fr-FR" вместо "fr".

Файлы в `@angular/common/locales` содержит большинство данных локали, которые вы
необходимо, но некоторые дополнительные параметры форматирования могут быть доступны только в дополнительном наборе данных, который вы можете
импорт из `@angular/common/locales/extra` . Сообщение об ошибке информирует вас, когда это так.
Ivy будет автоматически включать дополнительные данные о локали, если локаль была настроена через `i18nLocale`.

<code-example path="i18n/doc-files/app.locale_data_extra.ts" region="import-locale-extra" header="src/app/app.module.ts"></code-example>

<div class="alert is-helpful">

  Все данные локали, используемые Angular, взяты из консорциума Unicode
  <a href="http://cldr.unicode.org/" title="CLDR">Общее хранилище данных локали (CLDR) </a>.

</div>


{@a template-translations}
## Переводы шаблонов

<div class="alert is-helpful">

  Этот документ относится к единице переводимого текста как «текст», «сообщение» или
  "текстовое сообщение."

</div>

Процесс перевода шаблона i18n имеет четыре фазы:

1. Пометьте статические текстовые сообщения в шаблонах компонентов для перевода.

2. Создайте файл перевода: используйте Angular CLI `xi18n` для извлечения выделенного текста в стандартный исходный файл перевода.

3. Отредактируйте сгенерированный файл перевода: переведите извлеченный текст на целевой язык.

4. Добавьте целевой язык и языковой перевод в конфигурацию приложения.

5. Объединить заполненный файл перевода в приложение. Для этого используйте Angular CLI `build` команда чтобы скомпилировать приложение, выбрав [специфичная для локали конфигурация](#merge)или указав `--localize` [опция](#localize-config). Команда заменяет исходные сообщения переведенным текстом и создает новую версию приложения на целевом языке.
    * При использовании отдельных конфигураций для каждой локали вам необходимо создать и развернуть отдельную версию приложения для каждого поддерживаемого языка.
    * При использовании `--localize` CLI автоматически создавать отдельную версию приложения
для каждого поддерживаемого языка. Эта опция сокращает процесс сборки, устраняя необходимость выполнять полную сборку приложения для каждого поддерживаемого языка. Вам все еще нужно развернуть каждую языковую версию отдельно.

{@a i18n-attribute}
{@a mark-text-with-the-i18n-attribute}
### Пометьте текст атрибутом i18n

Angular `i18n` Атрибут отмечает переводимый контент. Поместите его на каждый тег элемента, чей фиксированный
текст должен быть переведен.

В приведенном ниже примере `<h1>` Тег отображает простое приветствие на английском языке "Hello i18n!"

<code-example path="i18n/doc-files/app.component.html" region="greeting" header="src/app/app.component.html"></code-example>

Чтобы отметить приветствие для перевода, добавьте `i18n` атрибут для `<h1>` тег.

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute" header="src/app/app.component.html"></code-example>


<div class="alert is-helpful">

   `i18n` - это пользовательский атрибут, распознаваемый инструментами и компиляторами Angular.
  После перевода компилятор удаляет его. Это не Angular директива.

</div>


{@a help-translator}
{@a help-the-translator-with-a-description-and-meaning}
### Помогите переводчику с описанием и значением

Для точного перевода текстового сообщения переводчику может потребоваться дополнительная информация или контекст.

Вы можете добавить описание текстового сообщения в качестве значения `i18n` атрибут, как показано в
Пример ниже:

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute-desc" header="src/app/app.component.html"></code-example>

Переводчику также может понадобиться узнать значение или намерение текстового сообщения в этом конкретном случае
контекст приложения.

Вы добавляете контекст, начиная `i18n` Значение атрибута с _meaning_ и
отделяя его от _description_ с `|` характер: `<meaning>|<description>` 

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute-meaning" header="src/app/app.component.html"></code-example>

Все вхождения текстового сообщения, имеющие одинаковое значение, будут иметь одинаковый перевод.
Текстовое сообщение, связанное с разными значениями, может иметь разные переводы.

Инструмент Angular извлечения сохраняет как значение, так и описание в переводе
исходный файл для облегчения контекстно-специфических переводов, но только сочетания значений
и текстовое сообщение используются для генерации конкретного идентификатора перевода. Если у вас есть два
похожие текстовые сообщения с разными значениями, они извлекаются отдельно. Если у вас есть два одинаковых
текстовые сообщения с разными описаниями (не разными значениями), тогда они извлекаются только один раз.


{@a custom-id}
{@a set-a-custom-id-for-persistence-and-maintenance}
### Установите пользовательский идентификатор для сохранения и обслуживания

Инструмент извлечения Angular i18n создает файл с записью единицы перевода для каждого `i18n` 
атрибут в шаблоне. По умолчанию, она присваивает каждому ЕП уникальный идентификатор, например, как этот:

<code-example path="i18n/doc-files/messages.fr.xlf.html" header="messages.fr.xlf.html" region="generated-id"></code-example>

Когда вы изменяете переводимый текст, инструмент извлечения генерирует новый идентификатор для этой единицы перевода.
Затем вы должны обновить файл перевода с новым идентификатором.

Кроме того, вы можете указать пользовательский идентификатор в `i18n` атрибут с использованием префикса `@@`.
Пример ниже определяет пользовательский идентификатор `introductionHeader` :

<code-example path='i18n/doc-files/app.component.html' region='i18n-attribute-solo-id' header='app/app.component.html'></code-example>

Когда вы указываете пользовательский идентификатор, инструмент извлечения и компилятор генерируют модуль перевода с этим
пользовательский идентификатор

<code-example path="i18n/doc-files/messages.fr.xlf.html" header="messages.fr.xlf.html" region="custom-id"></code-example>

Пользовательский идентификатор является постоянным. Инструмент извлечения не меняет его при изменении переводимого текста.
Поэтому вам не нужно обновлять перевод. Такой подход облегчает обслуживание.

{@a use-a-custom-id-with-a-description}
#### Используйте пользовательский идентификатор с описанием

Вы можете использовать пользовательский идентификатор в сочетании с описанием, включив оба значения в значение
 `i18n` атрибут . В приведенном ниже примере `i18n` Значение атрибута включает описание, а затем
по обычаю `id` :

<code-example path='i18n/doc-files/app.component.html' region='i18n-attribute-id' header='app/app.component.html'></code-example>

Кроме того, можно добавить значение, как показано в следующем примере:

<code-example path='i18n/doc-files/app.component.html' region='i18n-attribute-meaning-and-id' header='app/app.component.html'></code-example>

{@a define-unique-custom-ids}
#### Определите уникальные пользовательские идентификаторы

Не забудьте определить пользовательские идентификаторы, которые являются уникальными. Если вы используете один и тот же идентификатор для двух различных текстовых сообщений
извлекается только первое, и вместо обоих исходных текстовых сообщений используется его перевод.

В приведенном ниже примере пользовательский идентификатор `myId` используется для двух различных сообщений:

  ```html
    <h3 i18n="@@myId">Hello</h3>
    <!-- ... -->
    <p i18n="@@myId">Good bye</p>
  ```

Рассмотрим этот перевод на французский:

  ```xml
    <trans-unit id="myId" datatype="html">
      <source>Hello</source>
      <target state="new">Bonjour</target>
    </trans-unit>
  ```

Поскольку пользовательский идентификатор одинаков, оба элемента в результирующем переводе содержат
тот же текст, `Bonjour` :

  ```html
    <h3>Bonjour</h3>
    <!-- ... -->
    <p>Bonjour</p>
  ```



{@a no-element}
{@a translate-text-without-creating-an-element}
### Перевести текст без создания элемента

Если есть раздел текста, который вы хотели бы перевести, вы можете обернуть его в `<span>` тег
Однако, если вы не хотите, чтобы создать новый DOM - элемент только для облегчения перевода,
Вы можете обернуть текст в `<ng-container>` Элемент.
 `<ng-container>` преобразуется в HTML комментарий:

<code-example path="i18n/src/app/app.component.html" region="i18n-ng-container" header="src/app/app.component.html"></code-example>

{@a translate-attributes}
{@a translate-attributes}
### Перевести атрибуты

Отображаемый текст иногда предоставляется в качестве значения атрибута, а не содержимого тега.
Например, если ваш шаблон имеет изображение с `title` атрибут, текстовое значение `title` Атрибут должен быть переведен.

<code-example path="i18n/doc-files/app.component.html" region="i18n-title" header="src/app/app.component.html"></code-example>

Чтобы пометить атрибут для перевода, добавьте атрибут в виде `i18n-x`,
где `x` - имя атрибута для перевода. В следующем примере показано, как пометить
 `title` атрибут для перевода, добавив `i18n-title` Атрибут на `img` тег:

<code-example path="i18n/src/app/app.component.html" region="i18n-title-translate" header="src/app/app.component.html"></code-example>

Эта техника работает для любого атрибута любого элемента.

Вы также можете назначить значение, описание и идентификатор с помощью `i18n-x="<meaning>|<description>@@<id>"` 
синтаксис.

{@a regular-expressions-for-plurals-and-selections}
## Регулярные выражения для множественного числа и выборов

Разные языки имеют разные правила плюрализации и грамматические конструкции, которые добавляют
сложность для перевода.
Вы можете использовать регулярные выражения с `plural` и `select` пункты, чтобы предоставить шаблоны, которые помогают переводить в этих случаях.

{@a plural-ICU}
{@a pluralization}
### Плюрализация

Предположим, вы хотите сказать, что что-то было «обновлено х минут назад».
На английском языке, в зависимости от количества минут, вы можете отобразить «только сейчас», «минуту назад»
или «х минут назад» (где х - фактическое число).
Другие языки могут по-разному выражать количество элементов.

Пример ниже показывает, как использовать `plural` выражение ICU для отображения одного из этих трех вариантов
на основе, когда произошло обновление:

<code-example path="i18n/src/app/app.component.html" region="i18n-plural" header="src/app/app.component.html"></code-example>

* Первый параметр - это ключ. Это связано со свойством компонента (`minutes`), который определяет
количество минут.
* Второй параметр идентифицирует это как `plural` перевод.
* Третий параметр определяет шаблон плюрализации, состоящий из категорий плюрализации и их соответствующих значений.


<div class="alert is-helpful">

  Этот синтаксис соответствует
  <a href="http://userguide.icu-project.org/formatparse/messages" title="ICU Message Format">Формат сообщения ICU </a>
  как указано в
  <a href="http://cldr.unicode.org/index/cldr-spec/plural-rules" title="Pluralization Rules">Правила множественного числа CLDR </a>.

</div>

Плюрализация категории включают в себя ( в зависимости от языка):

* = 0 (или любое другое число)
* ноль
* один
* два
* немногие
* многие
* другой

После категории плюрализации поместите текст по умолчанию на английском языке в фигурные скобки (`{}`).

В приведенном выше примере три варианта указываются в соответствии с этим шаблоном множественного числа. Для
говоря о нуле минут, вы используете `=0 {just now}` . В течение одной минуты вы используете `=1 {one minute}`.
Любое непревзойденное использование мощности `other {{{minutes}} minutes ago}` . Вы можете добавить шаблоны
для двух, трех или любого другого числа, если правила множественного числа были другими. Для примера
«минута», только эти три образца необходимы на английском языке.

<div class="alert is-helpful">

  Вы можете использовать интерполяции и HTML-разметку внутри ваших переводов.

</div>

{@a select-ICU}
{@a select-among-alternative-text-messages}
### Выберите среди альтернативных текстовых сообщений

Если ваш шаблон должен отображать разные текстовые сообщения в зависимости от значения переменной, вы
нужно перевести все эти альтернативные текстовые сообщения.

Вы можете справиться с этим с `select` выражение ICU. Это похоже на `plural` выражения во
за исключением того, что вы выбираете среди альтернативных переводов на основе строкового значения вместо числа
и вы определяете эти строковые значения.

Следующее сообщение формата в шаблоне компонента привязывается к компоненту `gender` собственность
который выводит одно из следующих строковых значений: "мужской", "женский" или "другой".
Сообщение отображает эти значения в соответствующие переводы:

<code-example path="i18n/src/app/app.component.html" region="i18n-select" header="src/app/app.component.html"></code-example>

{@a nesting-ICUS}
{@a nesting-plural-and-select-icu-expressions}
### Вложите множественное число и выберите выражения ICU

Вы можете также гнездятся различные выражения ICU вместе, как показано в следующем примере:

<code-example path="i18n/src/app/app.component.html" region="i18n-nested" header="src/app/app.component.html">
</code-example>

{@a ng-xi18n}
{@a ng-xi18n-options}

{@a create-a-translation-source-file}
## Создайте исходный файл перевода

Когда ваше приложение будет готово, вы можете использовать Angular CLI для извлечения текстовых сообщений, помеченных `i18n` и атрибуты отмечены `i18n-x` в исходный файл перевода.
Откройте окно терминала в корне проекта приложения и выполните команду CLI `xi18n`.

<code-example language="sh" class="code-shell">
  ng xi18n
</code-example>

По умолчанию команда создает файл с именем `messages.xlf` в корневом каталоге вашего проекта.

{@a other-formats}
{@a output-options}
### Варианты вывода

Вы можете указать параметры команды, чтобы изменить формат, имя, местоположение и исходный язык извлеченного файла.
Например, чтобы создать файл в `src/locale` папка укажите путь вывода:

<code-example language="sh" class="code-shell">
  ng xi18n --output-path src/locale
</code-example>

По умолчанию `xi18n` создает файл перевода с именем `messages.xlf` в
<a href="https://en.wikipedia.org/wiki/XLIFF">Формат файла обмена локализацией XML
(XLIFF, версия 1.2) </a>.

Команда может читать и файлы записи в трех форматах перевода:
* XLIFF 1.2 (по умолчанию)
* XLIFF 2
* <a href="http://cldr.unicode.org/development/development-process/design-proposals/xmb" >XML сообщение
Пакет (XMB) </a>

Вы можете указать формат перевода явно с помощью `--format` Опция команды, как показано на рисунке
это пример команды:

<code-example language="sh" class="code-shell">
ng xi18n --format=xlf
ng xi18n --format=xlf2
ng xi18n --format=xmb
</code-example>

Пример в этом руководстве использует XLIFF по умолчанию 1.формат 2.

<div class="alert is-helpful">

  Файлы XLIFF имеют расширение .xlf. Формат XMB генерирует исходные файлы .xmb, но использует
  Файлы перевода .xtb (XML Translation Bundle: XTB).

</div>

Вы можете изменить имя исходного файла перевода, созданного инструментом извлечения, с помощью
 `--outFile` вариант команды:

<code-example language="sh" class="code-shell">

  ng xi18n --out-file source.xlf

</code-example>

Вы можете указать базовый язык вашего приложения с помощью `--i18n-locale` вариант команды:

<code-example language="sh" class="code-shell">

  ng xi18n --i18n-locale fr

</code-example>

Инструмент извлечения использует локаль для добавления информации о локали приложения в ваш источник перевода
файл. Эта информация не используется Angular, но она может понадобиться внешним инструментам перевода.


{@a translate}
{@a translate-the-source-text}
## Переведите исходный текст

По умолчанию `ng xi18n` создает исходный файл перевода с именем `messages.xlf` в проекте `src` папка.
Следующим шагом является перевод отображаемых строк в этом исходном файле на язык
файлы переводов. Пример в этом руководстве создает файл французского перевода.

{@a localization-folder}
{@a create-a-localization-folder}
### Создайте папку локализации

Большинство приложений переведены на несколько языков. По этой причине это стандартная практика
для структуры проекта, чтобы отразить все усилия по интернационализации.

Один из подходов состоит в том, чтобы выделить папку для локализации и сохранить связанные ресурсы, такие как
файлы интернационализации, там.

<div class="alert is-helpful">

  Локализация и интернационализация есть
  <a href="https://en.wikipedia.org/wiki/Internationalization_and_localization">разные но
  тесно связанные термины </a>.

</div>

Это руководство следует этому подходу. Оно имеет `locale` папка под `src/`.
Активы в этой папке имеют расширение имени файла, которое соответствует их связанной локали.

{@a create-the-translation-files}
### Создайте файлы перевода

Для каждого исходного файла перевода должен быть хотя бы один языковой файл перевода для
итоговый перевод.

Для этого примера:

1. Сделайте копию `messages.xlf` файл.
2. Поместите копию в `locale` папка.
3. Переименуйте копию в `messages.fr.xlf` для перевода на французский язык.

Если вы переводите на другие языки, повторите эти шаги для каждого целевого языка.

{@a translate-text-nodes}
{@a translate-text-nodes}
### Перевести текстовые узлы

В большом переводческом проекте вы бы отправили `messages.fr.xlf` Файл французскому переводчику
будет вводить переводы с помощью редактора файлов XLIFF.

Этот образец файла легко перевести без специального редактора или знания французского языка.

1. открыто `messages.fr.xlf` и найдите первый `<trans-unit>` секции:

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-hello-before" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

> Этот элемент XML представляет перевод `<h1>` тег приветствия, который вы пометили
   `i18n` Атрибут ранее в этом руководстве.

> Обратите внимание, что перевод модуля `id=introductionHeader` является производным от
  [пользовательский идентификатор](#custom-id "Set a custom id") который вы установили ранее, но
  без `@@` префикс требуется в исходном HTML.


2. Дублируйте `<source/>` тег, переименуйте его `target`, а затем заменить его содержимое на французский
  приветствие. Если вы работали с более сложным переводом, вы можете использовать информацию
  и контекст, предоставленный источником, описанием и значением элементов, которые помогут вам при выборе
  соответствующий французский перевод.

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-hello" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;, after translation)"></code-example>

3. Перевести другие текстовые узлы таким же образом:

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-other-nodes" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

<div class="alert is-important">

  **Инструменты Angular i18n создали идентификаторы для этих единиц перевода. Не меняй их.**
  каждый `id` зависит от содержания текста шаблона и его назначенного значения.
  Если вы измените либо текст, либо значение, то `id` меняется.
  Для получения дополнительной информации см. **[Обсуждение обслуживания файла перевода](#custom-id)**.

</div>

{@a translate-plural-select}
{@a translating-plural-and-select-expressions}
## Переводим множественное число и выбираем выражения

Выражения _plural_ и _select_ ICU извлекаются отдельно, поэтому они требуют особого внимания
при подготовке к переводу.

Ищите эти выражения по отношению к другим единицам перевода, из которых вы узнаете
в другом месте исходного шаблона. В этом примере вы знаете единицу перевода для `select` 
должен быть чуть ниже единицы перевода для логотипа.

{@a translate-plural}
{@a translate-plural}
### Перевести _plural_

Перевести `plural`, перевести его значение соответствует формату ICU:

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-plural" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

Вы можете добавлять или удалять множественные падежи, причем каждый язык имеет свою мощность. (См
[Правила множественного числа CLDR](http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html).)

{@a translate-select}
{@a translate-select}
### Перевести _select_

Ниже приводится содержание нашего примера `select` выражение ICU в компоненте шаблона:

<code-example path="i18n/src/app/app.component.html" region="i18n-select" header="src/app/app.component.html"></code-example>

Инструмент извлечения разбил это на две единицы перевода, потому что выражения ICU извлечены
отдельно.

Первый блок содержит текст, который был за пределами `select`.
Вместо `select` заполнитель, `<x id="ICU">`, который представляет `select` сообщение.
Переведите текст и переместите заполнитель, если это необходимо, но не удаляйте его. Если вы удалите
заполнитель, выражение ICU не будет присутствовать в вашем переведенном приложении.

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-select-1" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

Второй блок перевода, сразу под первым, содержит `select` сообщение.
Переведите это также.

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-select-2" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

Вот они вместе, после перевода

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-select" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

{@a translate-nested}
{@a translate-a-nested-expression}
### Перевести вложенное выражение

Вложенное выражение похоже на предыдущие примеры. Как и в предыдущем примере, есть
две единицы перевода. Первый из них содержит текст вне вложенного выражения:

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-nested-1" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

Второй блок содержит полное вложенное выражение:

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-nested-2" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

И то и другое вместе

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-nested" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

Весь шаблон перевода завершен. В следующем разделе описывается, как загрузить этот перевод
в приложение.

{@a app-pre-translation}
{@a the-app-and-its-translation-file}
### Приложение и его файл перевода

Образец приложения и его файл перевода теперь следующим образом :

<code-tabs>
  <code-pane header="src/app/app.component.html" path="i18n/src/app/app.component.html">
  </code-pane>
  <code-pane header="src/app/app.component.ts" path="i18n/src/app/app.component.ts">
  </code-pane>
  <code-pane header="src/app/app.module.ts" path="i18n/src/app/app.module.ts">
  </code-pane>
  <code-pane header="src/main.ts" path="i18n/doc-files/main.1.ts">
  </code-pane>
  <code-pane header="src/locale/messages.fr.xlf" path="i18n/doc-files/messages.fr.xlf.html">
  </code-pane>
</code-tabs>

{@a merge}
{@a merge-the-completed-translation-file-into-the-app}
## Объедините законченный файл перевода в приложение

Чтобы объединить переведенный текст в шаблоны компонентов, скомпилируйте приложение с готовым
файл перевода. Вам нужно будет указать путь к файлу перевода и поддерживаемую локаль или локали, для которых вы предоставили переводы. Вы можете сделать это в командной строке или через конфигурацию сборки в проекте. `angular.json` файл.

Процесс компиляции одинаков, независимо от того, находится ли файл перевода в `.xlf` Формат или в другом
формат, который понимает Angular, такой как `.xtb`.

{@a merge-aot}
[АОТ компилятор](guide/glossary#aot)является частью процесса сборки, что обеспечивает маленький, быстрый,
готовый пакет приложений. С Ivy в Angular версии 9 AOT используется по умолчанию для обоих
разработка и производство.

<div class="alert is-important">

Ivy не поддерживает слияние переводов i18n при использовании режима JIT.
Если вы [отключить Ivy](guide/ivy#opting-out-of-ivy-in-version-9)и использовать режим JIT,
дополнительная информация относительно перевода сращивания можно найти [здесь](https://v8.angular.io/guide/i18n#merge-with-the-jit-compiler).

</div>

Когда вы интернационализируете с помощью компилятора AOT, вы должны создать отдельное приложение
пакет для каждого языка и обслуживать соответствующий пакет на основе любого языка на стороне сервера
параметры обнаружения или URL. Интерфейс командной строки можно настроить для автоматического создания отдельных версий для конкретных языков
для каждой определенной локали.

{@a localize-config}
 `i18n` Опция проекта в вашем файле конфигурации CLI используется для определения локали для проекта. Подопции определяют исходный язык и сообщают компилятору, где найти поддерживаемые переводы для проекта.

  * `sourceLocale` - локаль, используемая в исходном коде приложения. По умолчанию `en-US`.
  * `locales` - Карта идентификаторов локали для файлов перевода

<code-example language="json" header="angular.json">
"projects": {
  ...
  "angular.io-example": {
    ...
    "i18n": {
      "sourceLocale": "en-US",
      "locales": {
        "fr": "src/locale/messages.fr.xlf"
      }
    }
    ...
    "targets": {
      ...
    }
  }
}
</code-example>

Чтобы указать компилятору AOT использовать конфигурацию перевода, установите `localize` опцию конфигурации сборки в вашем файле конфигурации CLI, `angular.json` . Опция поддерживает следующие значения:

  * `true` - создавать и генерировать специфичные для локали версии для всех определенных локалей, включая исходную локаль.
  * `false` - (по умолчанию) Отключить локализацию и не генерировать специфичные для локали версии.
  * Массив идентификаторов локали - создание и генерация версий для одной или нескольких указанных локалей.

При использовании `localize` Опция, CLI помещает вывод в специфичный для локали каталог, чтобы отделить его от других языковых версий вашего приложения. Каталоги размещены в настроенном `outputPath` для проекта.
CLI также корректирует базовый HREF HTML для каждой версии приложения, добавляя языковой стандарт к настроенному `baseHref`.

Вы также можете предоставить `--localize` для `ng build` Команда с вашим существующим `production` конфигурация.
В этом случае CLI создает все локали, определенные в i18n в конфигурации проекта.

<code-example language="sh" class="code-shell">
  ng build --prod --localize
</code-example>

Чтобы применить определенные параметры сборки только к одной локали, вы можете создать собственную конфигурацию для конкретной локали. В этом случае опция localize указывает одну локаль, как показано здесь.

<code-example language="json" header="angular.json">
"build": {
  ...
  "configurations": {
    ...
    "fr": {
      "localize": ["fr"],
      "main": "src/main.fr.ts",
      ...
    }
  }
},
"serve": {
  ...
  "configurations": {
    ...
    "fr": {
      "browserTarget": "*project-name*:build:fr"
    }
  }
}
</code-example>

Затем вы можете передать эту конфигурацию `ng serve ` или ` ng build` команды.
В приведенном ниже примере показано, как обслуживать файл на французском языке, созданный ранее
Разделы настоящего руководства:

<code-example language="sh" class="code-shell">
  ng serve --configuration=fr
</code-example>

<div class="alert is-important">

Сервер разработки CLI (`ng serve`) можно использовать только в одной локали.

</div>

Для производства сборки, вы можете использовать состав конфигурации для выполнения обе конфигурации:

<code-example language="sh" class="code-shell">
  ng build --configuration=production,fr
</code-example>

<code-example language="json" header="angular.json">
...
"architect": {
  "build": {
    "builder": "@angular-devkit/build-angular:browser",
    "options": { ... },
    "configurations": {
      "fr": {
        "localize": ["fr"],
      }
    }
  },
  ...
  "serve": {
    "builder": "@angular-devkit/build-angular:dev-server",
    "options": {
      "browserTarget": "my-project:build"
    },
    "configurations": {
      "production": {
        "browserTarget": "my-project:build:production"
      },
      "fr": {
        "browserTarget": "my-project:build:fr"
      }
    }
  }
}
</code-example>

{@a missing-translation}
{@a report-missing-translations}
### Сообщить о пропущенных переводах

По умолчанию, когда перевод отсутствует, сборка завершается успешно, но выдает предупреждение, например
 `Missing translation for message "foo"` . Вы можете настроить уровень предупреждения, который генерируется
Angular составитель:

* Ошибка: выведите ошибку. Если вы используете компиляцию AOT, сборка не удастся. Если вы используете JIT
компиляция, приложение не сможет загрузиться.
* Предупреждение (по умолчанию): отображать предупреждение «Отсутствует перевод» в консоли или оболочке.
* Игнорировать: ничего не делать.

Вы указываете уровень предупреждения в `options` раздел для `build` цель вашего файла конфигурации Angular CLI, `angular.json` . В приведенном ниже примере показано, как установить уровень предупреждения на ошибку.

<code-example language="json" header="angular.json">
"options": {
  ...
  "i18nMissingTranslation": "error"
}
</code-example>

{@a deployment-for-multiple-locales}
### Развертывание для нескольких локалей

Для получения дополнительной информации о том, как создавать сценарии для создания приложения на нескольких языках и как настроить Apache 2 и NGINX для обслуживания их из разных подкаталогов, прочитайте [это руководство Philippe Martin](https://dev.to/angular/deploying-an-i18n-angular-app-with-angular-cli-2fb9).
