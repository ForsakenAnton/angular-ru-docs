{@a angular-workspace-configuration}
# Angular конфигурация рабочего пространства

Файл с именем  `angular.json`  на корневом уровне Angular [рабочей области](guide/glossary#workspace)предоставляет настройки конфигурации по умолчанию для всей рабочей области и проекта для инструментов сборки и разработки, предоставляемых Angular CLI.
Значения пути, указанные в конфигурации, относятся к корневой папке рабочего пространства.

{@a overall-json-structure}
## Общая структура JSON

На верхнем уровне  `angular.json`, несколько свойств настраивают рабочее пространство и  `projects`  раздел содержит остальные параметры конфигурации для каждого проекта. Значения по умолчанию для CLI, установленные на уровне рабочей области, могут быть переопределены значениями по умолчанию, установленными на уровне проекта, а значения по умолчанию, установленные на уровне проекта, могут быть переопределены в командной строке.

Следующие свойства на верхнем уровне файла настраивают рабочую область.

*  `version` : версия файла конфигурации.
*  `newProjectRoot` : путь, по которому создаются новые проекты. Абсолют или относительно папки рабочей области.
*  `defaultProject` : имя проекта по умолчанию для использования в командах, если оно не указано в качестве аргумента. Когда вы используете `ng new` создать новое приложение в новом рабочем пространстве, это приложение является проектом по умолчанию для рабочего пространства, пока вы не измените его здесь.
*  `schematics` : набор [схемы](guide/glossary#schematic)которые настраивают `ng generate` опцию подкоманд по умолчанию для этого рабочего пространства. Смотрите [Схема генерации](#schematics)ниже.
*  `projects` : содержит подраздел для каждого проекта (библиотеки или приложения) в рабочей области с параметрами конфигурации для каждого проекта.

Начальное приложение, которое вы создаете с `ng new app_name` указывается в разделе «проекты»:

<code-example language="json">

"projects": {
  "app_name": {
    ...
  }
  ...
}

</code-example>

Каждое дополнительное приложение, которое вы создаете с `ng generate application` имеет соответствующий сквозной тестовый проект с собственным разделом конфигурации.
Когда вы создаете проект библиотеки с `ng generate library` проект библиотеки также добавляется в  `projects`  раздел.

<div class="alert is-helpful">

  Обратите внимание, что  `projects`  Раздел файла конфигурации не совсем соответствует структуре файла рабочей области.
  * Первоначальное приложение, созданное `ng new` находится на верхнем уровне структуры файла рабочей области.
  * Дополнительные приложения и библиотеки идут в  `projects`  папка в рабочей области.

  Для получения дополнительной информации см. [Рабочая область и структура файла проекта](guide/file-structure).

</div>

{@a project-configuration-options}
## Варианты конфигурации проекта

Следующие свойства конфигурации верхнего уровня доступны для каждого проекта в разделе  `projects:<project_name>`.

<code-example language="json">

    "my-app": {
      "root": "",
      "sourceRoot": "src",
      "projectType": "application",
      "prefix": "app",
      "schematics": {},
      "architect": {}
    }

</code-example>

| НЕДВИЖИМОСТЬ | ОПИСАНИЕ |
| : -------------- | : ---------------------------- |
|  `root`            | Корневая папка для файлов этого проекта относительно папки рабочей области. Пусто для начального приложения, которое находится на верхнем уровне рабочей области. |
|  `sourceRoot`      | Корневая папка для исходных файлов этого проекта. |
|  `projectType`     | Один из «приложения» или «библиотеки». Приложение может работать независимо в браузере, а библиотека - нет.
|  `prefix`          | Строка, которую Angular добавляет к сгенерированным селекторам. Может быть настроен для идентификации приложения или области функций. |
|  `schematics`      | Набор схем, которые настраивают `ng generate` опцию подкоманд по умолчанию для этого проекта. Смотрите [Схема генерации](#schematics)ниже. |
|  `architect`       | Конфигурация по умолчанию для целей Architect Builder для этого проекта. |

{@a schematics}

{@a generation-schematics}
## Схемы генерации

Генерация углов [схемы](guide/glossary#schematic)- это инструкции по изменению проекта путем добавления файлов или изменения существующих файлов.
Индивидуальные схемы для стандартного Angular CLI `ng generate` подкоманды собраны в пакете  `@angular`.
Укажите имя схемы для подкоманды в формате  `schematic-package:schematic-name`  ;
например, схема для создания компонента  `@angular:component`.

Схемы JSON для схем по умолчанию, используемых CLI для генерации проектов и частей проектов, собраны в пакет [ `@ schematics / angular` ](https://github.com/angular/angular-cli/blob/7.0.x/packages/schematics/angular/application/schema.json).
Схема описывает параметры, доступные для CLI для каждого из `ng generate` подкоманды, как показано в  `--help`  выводе.

Поля, указанные в схеме, соответствуют допустимым значениям аргументов и значениям по умолчанию для параметров подкоманд CLI.
Вы можете обновить файл схемы рабочего пространства, чтобы установить другое значение по умолчанию для параметра подкоманды.

{@a architect}

{@a project-tool-configuration-options}
## Параметры конфигурации инструмента проекта

Архитектор - это инструмент, который CLI использует для выполнения сложных задач, таких как компиляция и запуск теста.
Архитектор - это оболочка, которая запускает указанную [сборщик](guide/glossary#builder)для выполнения данной задачи в соответствии с [целевой](guide/glossary#target)конфигурацией.
Вы можете определить и настроить новые компоновщики и цели для расширения CLI.
Смотрите [Angular CLI Builders](guide/cli-builder).

{@a default-build-targets}

{@a default-architect-builders-and-targets}
### По умолчанию Архитектор строителей и целей

Angular определяет компоновщики по умолчанию для использования с конкретными командами CLI или с общими `ng run` Команда.
Схемы JSON, которые определяют параметры и значения по умолчанию для каждого из этих сборщиков по умолчанию, собраны в [ `@ angular-devkit / build-angular` ](https://github.com/angular/angular-cli/blob/8.0.x/packages/angular/cli/lib/config/schema.json)пакете.
Схемы настраивают параметры для следующих сборщиков.

* app-shell
* браузер
* Дев-сервер
* выдержка-i18n
* карма
* транспортир
* сервер
* Цлинт

{@a configuring-builder-targets}
### Конфигурирование целей застройщика

 `architect ` отдел ` angular.json` содержит набор целей Architect.
Многие из целей соответствуют командам CLI, которые запускают их.
Некоторые дополнительные предопределенные цели могут быть запущены с помощью `ng run` Команда, и вы можете определить свои собственные цели.

Каждый целевой объект указывает  `builder`  для этой цели, который является пакетом npm для инструмента, который запускает Architect.
Кроме того, каждая цель имеет  `options`  раздел который настраивает параметры по умолчанию для цели, и  `configurations`  Раздел который называет и определяет альтернативные конфигурации для цели.
Смотрите пример в [Построить цель](#build-target)ниже.

<code-example language="json">

      "architect": {
        "build": { },
        "serve": { },
        "e2e" : { },
        "test": { },
        "lint": { },
        "extract-i18n": { },
        "server": { },
        "app-shell": { }
      }

</code-example>

*  `architect/build` Секция настраивает параметры по умолчанию для параметров `ng build` Команда.
Смотрите [Построить цель](#build-target)ниже для получения дополнительной информации.

*  `architect/serve` Раздел переопределяет значения по умолчанию для сборки и предоставляет дополнительные значения по умолчанию для `ng serve` команду. В дополнение к опциям, доступным для `ng build` Команда, добавляет опции, связанные с обслуживанием приложения.

*  `architect/e2e` раздел переопределяет значения по умолчанию для параметров сборки для создания приложений сквозного тестирования с использованием `ng e2e` команда.

*  `architect/test` Раздел переопределяет значения по умолчанию для опций сборки для тестовых сборок и предоставляет дополнительные значения по умолчанию для запуска тестов. `ng test` команда.

*  `architect/lint` Раздел настраивает параметры по умолчанию для параметров `ng lint` Команда, которая выполняет анализ кода исходных файлов проекта. Инструмент для рисования по умолчанию для Angular [TSLint](https://palantir.github.io/tslint/).

*  `architect/extract-i18n` разделе настраиваются параметры по умолчанию для параметров  `ng-xi18n`  инструмент, используемый `ng xi18n`, которая извлекает отмеченные строки сообщений из исходного кода и выводит файлы перевода.

*  `architect/server` разделе настраиваются параметры по умолчанию для создания универсального приложения с рендерингом на стороне сервера, используя `ng run <project>:server` команда.

*  `architect/app-shell` разделе настраиваются параметры по умолчанию для создания оболочки приложения для прогрессивного веб-приложения (PWA) с использованием `ng run <project>:app-shell` команда.

В общем, параметры, для которых вы можете настроить значения по умолчанию, соответствуют параметрам команды, перечисленным в [справочная страница CLI](cli)для каждой команды.
Обратите внимание, что все параметры в файле конфигурации должны использовать [camelCase](guide/glossary#case-conventions), а не dash-case.

{@a build-target}

{@a build-target}
## Постройте цель

 `architect/build` Секция настраивает параметры по умолчанию для параметров `ng build` Команда . Он имеет следующие свойства верхнего уровня.

| НЕДВИЖИМОСТЬ | ОПИСАНИЕ |
| : -------------- | : ---------------------------- |
|  `builder`         | Пакет npm для инструмента сборки, используемого для создания этой цели. Компоновщик по умолчанию для приложения (`ng build myApp`) есть  `@angular-devkit/build-angular:browser`, использующий [пакетный webpack](https://webpack.js.org/)пакет . Обратите внимание, что для построения библиотеки используется другой компоновщик (`ng build myLib`). |
|  `options`         | Этот раздел содержит параметры цели сборки по умолчанию, используемые, если не указана именованная альтернативная конфигурация. См. [Цели сборки по умолчанию](#default-build-targets)ниже. |
|  `configurations`  | Этот раздел определяет и называет альтернативные конфигурации для различных предполагаемых мест назначения. Он содержит раздел для каждой именованной конфигурации, который устанавливает параметры по умолчанию для этой предполагаемой среды. См. [Альтернативные конфигурации сборки](#build-configs)ниже. |


{@a build-configs}

{@a alternate-build-configurations}
### Альтернативные конфигурации сборки

По умолчанию  `production`  Конфигурация определена, а `ng build` Команда имеет  `--prod`  опция, которая строится с использованием этой конфигурации.  `production` конфигурация устанавливает значения по умолчанию, которые оптимизируют приложение несколькими способами, такими как объединение файлов, минимизация избыточного пробела, удаление комментариев и мертвого кода и переписывание кода для использования коротких, загадочных имен («минификация»).

Вы можете определить и назвать дополнительные альтернативные конфигурации (такие как  `stage`, например) соответствующий вашему процессу разработки. Некоторые примеры различных конфигураций сборки  `stable`, `archive`  и  `next`  используется самим AIO и индивидуальными настройками, специфичными для локали, необходимыми для создания локализованных версий приложения. Подробнее см. [Интернационализация (i18n)](guide/i18n#merge-aot).

Вы можете выбрать альтернативную конфигурацию, передав ее имя  `--configuration`  флаг командной строки.

Вы также можете передать более одного имени конфигурации в виде списка через запятую. Например, чтобы применить оба  `stage`  и  `fr`  построения конфигураций используйте команду `ng build --configuration stage,fr` . В этом случае команда анализирует именованные конфигурации слева направо. Если несколько конфигураций изменяют один и тот же параметр, последнее заданное значение является последним.

Если  `--prod`  командной строки также используется, он применяется первым, и его настройки могут быть переопределены любыми конфигурациями, указанными через  `--configuration`  флаг.

{@a build-props}

{@a additional-build-and-test-options}
### Дополнительные опции сборки и тестирования

Настраиваемые параметры для сборки по умолчанию или целевой сборки обычно соответствуют параметрам, доступным для [команд  `ng build` ](cli/build), [ ` ng serve` ](cli/serve)и [ `ng test` ](cli/test). Для получения подробной информации об этих параметрах и их возможных значениях см. [Справочник CLI](cli).

Некоторые дополнительные параметры могут быть установлены только через файл конфигурации, либо путем прямого редактирования, либо с помощью [ `ng config` ](cli/config)команда.

| ВАРИАНТЫ СВОЙСТВА | ОПИСАНИЕ |
| : ------------------------- | : ---------------------------- |
|  `assets`                     | Объект, содержащий пути к статическим ресурсам для добавления в глобальный контекст проекта. Пути по умолчанию указывают на файл значка проекта и его  `assets`  папка . Смотрите больше в [Конфигурация активов](#asset-config)ниже. |
|  `styles`                     | Массив файлов стилей для добавления в глобальный контекст проекта. Angular CLI поддерживает импорт CSS и все основные препроцессоры CSS: [sass / scss](http://sass-lang.com/), [меньше](http://lesscss.org/)и [стилус](http://stylus-lang.com/). Смотрите больше в [Настройка стилей и скриптов](#style-script-config)ниже. |
|  `stylePreprocessorOptions`  | Объект, содержащий пары параметр-значение для передачи препроцессорам стиля. Смотрите больше в [Настройка стилей и скриптов](#style-script-config)ниже. |
|  `scripts`                    | Объект, содержащий файлы сценариев JavaScript для добавления в глобальный контекст проекта. Скрипты загружаются точно так же, как если бы вы добавили их в  `<script>`  тег внутри  `index.html`  . Смотрите больше в [Настройка стилей и скриптов](#style-script-config)ниже. |
|  `budgets`                    | Тип размера бюджета по умолчанию и пороговые значения для всего или частей вашего приложения. Вы можете настроить построитель так, чтобы он сообщал о предупреждении или ошибке, когда выходные данные достигают или превышают пороговый размер. Смотрите [Настройка размеров бюджетов](guide/build#configure-size-budgets). (Недоступно в  `test`  раздел.) |
|  `fileReplacements`           | Объект, содержащий файлы и их замены во время компиляции. См больше [замены целевых конкретных файлов Конфигурировать](guide/build#configure-target-specific-file-replacements). |

{@a complex-config}

{@a complex-configuration-values}
## Сложные значения конфигурации

Варианты  `assets`, `styles`  и  `scripts`  могут иметь либо простые строковые значения пути, либо значения объекта с конкретными полями.
 `sourceMap ` и ` optimization` параметров может быть задано простое логическое значение с флагом команды, но также может быть задано комплексное значение с помощью файла конфигурации.
Следующие разделы предоставляют более подробную информацию о том, как эти сложные значения используются в каждом случае.

{@a asset-config}

{@a assets-configuration}
### Конфигурация активов

каждый  `build`  Конфигурация целевой может включать в себя  `assets`  массив котором перечислены файлы или папки, которые вы хотите скопировать как есть при создании проекта.
По умолчанию  `src/assets/`  папка и  `src/favicon.ico`  скопированы.

<code-example language="json">

"assets": [
  "src/assets",
  "src/favicon.ico"
]

</code-example>

Чтобы исключить актив, вы можете удалить его из конфигурации активов.

Вы можете дополнительно настроить активы для копирования, указав активы как объекты, а не как простые пути относительно корня рабочей области.
Объект спецификации актива может иметь следующие поля.

*  `glob` : A [node-glob](https://github.com/isaacs/node-glob/blob/master/README.md)используя  `input`  как базовый каталог.
*  `input` : путь относительно корня рабочего пространства.
*  `output` : путь относительно  `outDir`  (по умолчанию  `dist/` *имя-проекта *). Из-за проблем безопасности CLI никогда не записывает файлы за пределы выходного пути проекта.
*  `ignore` : список исключаемых глобусов.

Например, пути активов по умолчанию могут быть представлены более подробно с помощью следующих объектов.

<code-example language="json">

"assets": [
  { "glob": "**/*", "input": "src/assets/", "output": "/assets/" },
  { "glob": "favicon.ico", "input": "src/", "output": "/" }
]

</code-example>

Вы можете использовать эту расширенную конфигурацию для копирования ресурсов извне вашего проекта.
Например, следующие копии конфигурации активы из пакета узла:

<code-example language="json">

"assets": [
 { "glob": "**/*", "input": "./node_modules/some-package/images", "output": "/some-package/" },
]

</code-example>

Содержание  `node_modules/some-package/images/`  будет доступен в  `dist/some-package/`.

В следующем примере используется  `ignore`  поле, чтобы исключить определенные файлы в папке активов от копирования в сборку:

<code-example language="json">

"assets": [
 { "glob": "**/*", "input": "src/assets/", "ignore": ["**/*.svg"], "output": "/assets/" },
]

</code-example>

{@a style-script-config}

{@a styles-and-scripts-configuration}
### Настройка стилей и скриптов

Запись массива для  `styles`  и  `scripts`  могут быть простой строкой пути или объектом, который указывает на дополнительный файл точки входа.
Связанный компоновщик загрузит этот файл и его зависимости как отдельный пакет во время сборки.
С объектом конфигурации у вас есть возможность присвоить имя пакету для точки входа, используя  `bundleName`  поле.

Пакет вводится по умолчанию, но вы можете установить  `inject`  false, чтобы исключить связку из инъекции.
Например, следующие значения объекта создать и назвать комплект, содержащий стили и скрипты, и исключает его из инъекций:

<code-example language="json">

   "styles": [
     { "input": "src/external-module/styles.scss", "inject": false, "bundleName": "external-module" }
   ],
   "scripts": [
     { "input": "src/external-module/main.js", "inject": false, "bundleName": "external-module" }
   ]

</code-example>

Вы можете смешивать простые и сложные ссылки на файлы для стилей и сценариев.

<code-example language="json">

"styles": [
  "src/styles.css",
  "src/more-styles.css",
  { "input": "src/lazy-style.scss", "inject": false },
  { "input": "src/pre-rename-style.scss", "bundleName": "renamed-style" },
]

</code-example>

{@a style-preprocessor}

{@a style-preprocessor-options}
#### Опции стиля препроцессора

В Sass и Stylus вы можете использовать  `includePaths`  для компонентных и глобальных стилей позволяет добавлять дополнительные базовые пути, которые будут проверяться на предмет импорта.

Чтобы добавить пути, используйте  `stylePreprocessorOptions`  вариант:

<code-example language="json">

"stylePreprocessorOptions": {
  "includePaths": [
    "src/style-paths"
  ]
}

</code-example>

Файлы в этой папке, такие как  `src/style-paths/_variables.scss`, может быть импортирован из любого места в вашем проекте без необходимости относительного пути:

```ts
// src/app/app.component.scss
// A relative path works
@import '../style-paths/variables';
// But now this works as well
@import 'variables';
```

Обратите внимание, что вам также необходимо добавить любые стили или сценарии  `test`  Построитель если они вам нужны для модульных тестов.
Смотрите также [Использование глобальных исполняемых библиотек внутри вашего приложения](guide/using-libraries#using-runtime-global-libraries-inside-your-app).


{@a optimize-and-srcmap}

{@a optimization-and-source-map-configuration}
### Оптимизация и настройка исходной карты

 `optimization ` и ` sourceMap` команды - это простые логические флаги.
Вы можете предоставить объект в качестве значения конфигурации для любого из них, чтобы предоставить более подробные инструкции.

* Флаг  `--optimization="true"`  применяется как к сценариям, так и к стилям. Вы можете указать значение, такие как следующие применять оптимизацию к одному или другому:

<code-example language="json">

   "optimization": { "scripts": true, "styles": false }

</code-example>

* Флаг  `--sourceMap="true"`  выводит исходные карты для скриптов и стилей.
Вы можете настроить опцию для применения к одному или другому.
Вы также можете выбрать вывод скрытых исходных карт или разрешение исходных карт пакета поставщика.
Например:

<code-example language="json">

   "sourceMap": { "scripts": true, "styles": false, "hidden": true, "vendor": true }

</code-example>

<div class="alert is-helpful">

   При использовании скрытых исходных карт исходные карты не будут указываться в комплекте.
   Это полезно, если вы хотите, чтобы исходные карты отображали трассировки стека ошибок в инструментах отчетов об ошибках
   но не хочу показывать ваши исходные карты в инструментах разработчика браузера.

   Для [Universal](guide/glossary#universal), вы можете уменьшить код, отображаемый на HTML-странице
   настройка оптимизации стилей на  `true`  и стили исходных карт для  `false`.

</div>
