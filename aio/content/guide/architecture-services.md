{@a introduction-to-services-and-dependency-injection}
# Введение в сервисы и внедрение зависимостей

*Сервис* - это широкая категория, охватывающая любое значение, функцию или функцию, которая нужна приложению.
Служба обычно представляет собой класс с узкой, четко определенной целью.
Он должен делать что-то конкретное и делать это хорошо.

Angular отличает компоненты от сервисов для повышения модульности и возможности повторного использования.
Отделив вид связанной функциональности компонента от других видов обработки,
Вы можете сделать свои классы компонентов бережливыми и эффективными.

В идеале работа компонента заключается в том, чтобы обеспечить взаимодействие с пользователем и ничего более.
Компонент должен представлять свойства и методы для привязки данных
для посредничества между представлением (представленным шаблоном)
и логика приложения (которая часто включает в себя некоторое представление о *модели*).

Компонент может делегировать определенные задачи службам, например, выборку данных с сервера
проверка ввода пользователя или вход непосредственно в консоль.
Определяя такие задачи обработки в для *классе обслуживания инъекций*, вы выполняете эти задачи
доступно для любого компонента.
Вы также можете сделать свое приложение более адаптируемым, внедряя разных поставщиков одного и того же вида услуг
в зависимости от обстоятельств.

Angular не *применяет* эти принципы. Angular помогает вам *следовать* этим принципам
упрощая логику вашего приложения в сервисах и создавая эти сервисы
доступны для компонентов посредством *внедрения зависимостей*.

{@a service-examples}
## Сервисные примеры

Вот пример класса обслуживания, который регистрируется в консоли браузера.

<code-example path="architecture/src/app/logger.service.ts" header="src/app/logger.service.ts (class)" region="class"></code-example>

Сервисы могут зависеть от других сервисов. Например, вот `HeroService` который зависит от `Logger` сервиса, а также использует `BackendService` для получения героев. Этот сервис в свою очередь может зависеть от `HttpClient` для асинхронной выборки героев с сервера.

<code-example path="architecture/src/app/hero.service.ts" header="src/app/hero.service.ts (class)" region="class"></code-example>

{@a dependency-injection-di}
## Зависимость от инъекций (DI)

<img src="generated/images/guide/architecture/dependency-injection.png" alt="Service" class="left">

DI встроен в платформу Angular и используется повсеместно для предоставления новым компонентам услуг или других необходимых им вещей.
Компоненты потребляют услуги; то есть вы можете *внедрить* сервис в компонент, предоставляя компоненту доступ к этому классу сервиса.

Чтобы определить класс как сервис в Angular, используйте `@Injectable()` для предоставления метаданных, которые позволяют Angular внедрять их в компонент как *зависимость*.
Точно так же используйте `@Injectable()` декоратор, чтобы указать, что компонент или другой класс (например, другую службу, труб, или NgModule) *имеет* зависимость.

* *Инжектор* является основным механизмом. Angular создает инжектор для всего приложения для вас во время процесса начальной загрузки и дополнительные инжекторы по мере необходимости. Вам не нужно создавать инжекторы.

* Инъектор создает зависимости и поддерживает*контейнер * экземпляров зависимостей, которые он использует, если это возможно.

* *Поставщик* является объектом, который говорит инжектор, как получить или создать зависимость.

Для любой зависимости, которая вам нужна в вашем приложении, вы должны зарегистрировать поставщика с помощью инжектора приложения
чтобы инжектор мог использовать провайдера для создания новых экземпляров.
Для службы поставщиком обычно является сам класс обслуживания.

<div class="alert is-helpful">

Зависимость не обязательно должна быть службой - это может быть, например, функция или значение.

</div>

Когда Angular создает новый экземпляр класса компонента, он определяет, какие службы или другие зависимости нужны компоненту, просматривая типы параметров конструктора. Например, конструктор `HeroListComponent` нуждается `HeroService`.

<code-example path="architecture/src/app/hero-list.component.ts" header="src/app/hero-list.component.ts (constructor)" region="ctor"></code-example>

Когда Angular обнаруживает, что компонент зависит от службы, он сначала проверяет, есть ли у инжектора какие-либо существующие экземпляры этой службы. Если запрошенный экземпляр службы еще не существует, инжектор создает его с использованием зарегистрированного поставщика и добавляет его к инжектору перед возвратом службы в Angular.

Когда все запрошенные сервисы будут разрешены и возвращены, Angular может вызвать конструктор компонента с этими сервисами в качестве аргументов.

Процесс `HeroService` выглядит примерно так.

<div class="lightbox">
  <img src="generated/images/guide/architecture/injector-injects.png" alt="Service" class="left">
</div>

{@a providing-services}
### Предоставление услуг

Вы должны зарегистрировать хотя бы одного *поставщика* любой услуги, которую вы собираетесь использовать.
Поставщик может быть частью собственных метаданных службы, делая эту службу доступной везде
или вы можете зарегистрировать провайдеров с определенными модулями или компонентами.
Вы регистрируете провайдеров в метаданных службы (в `@Injectable()` )
или в `@NgModule()` или `@Component()` метаданные

* По умолчанию команда Angular CLI [ `ng generate service` ](cli/generate)регистрирует поставщика с корневым инжектором для вашей службы, включая метаданные поставщика в `@Injectable()` декоратор. Учебное пособие использует этот метод для регистрации поставщика определения класса HeroService.

   ```
   @Injectable({
    providedIn: 'root',
   })
   ```

   Когда вы предоставляете сервис на корневом уровне, Angular создает один общий экземпляр `HeroService` 
   и вводит его в любой класс, который просит об этом.
   Регистрация провайдера в `@Injectable()` также позволяют Angular оптимизировать приложение
   удалив службу из скомпилированного приложения, если оно не используется.

* Когда вы регистрируете провайдера с помощью [определенного NgModule](guide/architecture-modules), один и тот же экземпляр сервиса становится доступным для всех компонентов в этом NgModule. Чтобы зарегистрироваться на этом уровне, используйте `providers` собственность `@NgModule()` декоратор,

   ```
   @NgModule({
     providers: [
     BackendService,
     Logger
    ],
   ...
   })
   ```

* Когда вы регистрируете провайдера на уровне компонентов, вы получаете новый экземпляр
обслуживание с каждым новым экземпляром этого компонента.
На уровне компонентов зарегистрируйте поставщика услуг в `providers` собственность `@Component()` метаданные.

   <code-example path="architecture/src/app/hero-list.component.ts" header="src/app/hero-list.component.ts (component providers)" region="providers"></code-example>

Для получения более подробной информации см [Dependency Injection](guide/dependency-injection)раздел.
